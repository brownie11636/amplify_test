(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9796],{32027:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/webrtc/cast",function(){return t(92117)}])},73538:function(e,n,t){"use strict";var r=t(51438),o=t(52951),i=t(88029),c=t(5950),s=t(85893),a=t(67294),u=t(41664),l=t.n(u),d=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,o.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.pageTitle,t=e.homePageUrl,r=e.homePageText,o=e.activePageText,i=e.bgImgClass;return(0,s.jsxs)("div",{className:"page-title-area ".concat(i),children:[(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"page-title-content",children:[(0,s.jsx)("h2",{children:n}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:t,children:(0,s.jsx)("a",{children:r})})}),(0,s.jsx)("li",{children:o})]})]})}),(0,s.jsxs)("div",{className:"lines",children:[(0,s.jsx)("div",{className:"line"}),(0,s.jsx)("div",{className:"line"}),(0,s.jsx)("div",{className:"line"})]})]})}}]),t}(a.Component);n.Z=d},78348:function(e,n,t){"use strict";var r=t(51438),o=t(52951),i=t(88029),c=t(5950),s=t(85893),a=t(67294),u=t(41664),l=t.n(u),d=function(e){(0,i.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,o.Z)(t,[{key:"render",value:function(){(new Date).getFullYear();return(0,s.jsxs)("footer",{className:"footer-area",children:[(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsx)("div",{className:"single-footer-widget",children:(0,s.jsxs)("div",{className:"footer-contact-list",children:[(0,s.jsx)("div",{className:"title",children:"Contacts"}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("strong",{children:"Email:"})," jangjun_park@portal301.com"]}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("strong",{children:"Phone:"})," +82 10-5609-9527"]})]})})})})}),(0,s.jsx)("div",{className:"copyright-area",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row align-items-center",children:(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsx)("ul",{children:(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)("a",{children:"\xa9 Copyright PORTAL301 All Rights Reserved."})})})})})})})})]})}}]),t}(a.Component);n.Z=d},44108:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(828),o=t(82222),i=t(85893),c=t(67294),s=t(13823),a=t(70461),u=t(9473),l=t(32505);function d(){var e=(0,u.I0)(),n=(0,u.v9)(l.h5),t=(0,c.useRef)(),d=(0,u.v9)(l.L4),f=(0,c.useState)(!0),h=f[0],g=f[1],m=(0,r.Z)((0,a.Z)(["id","nickname"]),2),v=m[0];m[1];(0,c.useEffect)((function(){return console.log("cookies.id:",v.id),"undefined"===v.id&&console.log("aaaaaaaaa",(0,o.Z)(v.id)),void 0===v.id||"undefined"===v.id?(t.current=!1,e((0,l.Q2)(!1)),e((0,l.vm)("")),e((0,l.ng)(""))):(t.current=!0,e((0,l.Q2)(!0)),e((0,l.vm)(v.id)),e((0,l.ng)(v.nickname))),console.log("is?",t.current),document.getElementById("navbar").classList.add("is-sticky"),function(){!1}}),[]);var p=h?"collapse navbar-collapse":"collapse navbar-collapse show",x=h?"navbar-toggler navbar-toggler-right collapsed":"navbar-toggler navbar-toggler-right";return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{id:"navbar",className:"navbar-area",children:(0,i.jsx)("div",{className:"main-nav",children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"navbar navbar-expand-md navbar-light",children:[(0,i.jsx)(s.Z,{href:"/",children:(0,i.jsxs)("a",{className:"navbar-brand",children:[(0,i.jsx)("img",{src:"/images/main_bar.png",className:"main-bar",alt:"logo"}),(0,i.jsx)("img",{src:"/images/main_logo3.png",className:"optional-logo",alt:"logo"})]})}),(0,i.jsxs)("button",{onClick:function(){g((function(e){return!e}))},className:x,type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:[(0,i.jsx)("span",{className:"icon-bar top-bar"}),(0,i.jsx)("span",{className:"icon-bar middle-bar"}),(0,i.jsx)("span",{className:"icon-bar bottom-bar"})]}),(0,i.jsxs)("div",{className:p,id:"navbarSupportedContent",children:[(0,i.jsxs)("ul",{className:"navbar-nav",children:[!1===n?(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(s.Z,{href:"/registration",activeClassName:"active",children:(0,i.jsx)("a",{className:"nav-link",children:"Registration"})})}):(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(s.Z,{href:"/mypage",activeClassName:"active",children:(0,i.jsxs)("a",{className:"nav-link",children:[d,"\ub2d8"]})})}),!1===n?(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(s.Z,{href:"/login",activeClassName:"active",children:(0,i.jsx)("a",{className:"nav-link",children:"Log In"})})}):(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(s.Z,{href:"/logout",activeClassName:"active",children:(0,i.jsx)("a",{className:"nav-link",children:"Log Out"})})})]}),(0,i.jsx)("div",{className:"others-options"})]})]})})})})})}},92117:function(e,n,t){"use strict";t.r(n),t.d(n,{App:function(){return j}});var r=t(47568),o=t(14924),i=t(26042),c=t(69396),s=t(828),a=t(70655),u=t(85893),l=t(67294),d=t(86809),f=t.n(d),h=t(44108),g=t(73538),m=t(78348),v=t(96894),p={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},x=v.d5,j=function(){var e=function(e){console.log("Remote stream added. event.stream?>>>",e.stream),y.current.srcObject=e.stream},n=(0,l.useRef)(),t=(0,l.useRef)(),d=(0,l.useRef)({}),v=(0,l.useRef)(),j=(0,l.useRef)(null),y=(0,l.useRef)(null),b=(0,l.useRef)(),w=(0,l.useRef)(),N=(0,l.useRef)(),S=(0,l.useState)([]),C=S[0],_=S[1],k=function(e,t){console.log("send message(emit msg-v1)",e.type,t);var r={from:n.current.id,to:t,message:e};n.current.emit("msg-v1",r)},O=function(){var e=(0,r.Z)((function(){var e,r;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,navigator.mediaDevices.getUserMedia({video:!0,audio:!0})];case 1:return e=o.sent(),j.current&&(j.current.srcObject=e),e.getTracks().forEach((function(n){t.current&&t.current.addTrack(n,e)})),n.current.emit("Start_Service",{socketId:n.current.id,room:"room:"+n.current.id,type:"Device_1",description:"Streamer",contents:"jooonik"}),k("got user media",null),[3,3];case 2:return r=o.sent(),console.error(r),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=(function(){var e=(0,r.Z)((function(){var e,r,o;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:console.log("create offer"),e=N.current.find((function(e){return e.sid===w.current})),console.log(e),console.log(e),n.current.emit("Join_Service",e.sid),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,t.current.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 2:return r=i.sent(),[4,t.current.setLocalDescription(new RTCSessionDescription(r))];case 3:return i.sent(),console.log(t.current.iceGatheringState),t.current.oniceconnectionstatechange=function(e){console.log("oniceconnectionstatechange : ",e.target.connectionState)},k(r,e.sid),v.current=e.sid,[3,5];case 4:return o=i.sent(),console.log("errrrrrrrrr"),console.error(o),[3,5];case 5:return[2]}}))}))}(),function(){var e=(0,r.Z)((function(){var e,r;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,t.current.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return e=o.sent(),[4,t.current.setLocalDescription(new RTCSessionDescription(e))];case 2:return o.sent(),console.log(t.current.iceGatheringState),t.current.oniceconnectionstatechange=function(e){console.log("oniceconnectionstatechange : ",e.target.connectionState)},k(e,v.current),n.current.emit("offer",e),[3,4];case 3:return r=o.sent(),console.log("errrrrrrrrr"),console.error(r),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}()),Z=function(e){console.log("Failed to create session description: "+e.toString())},R=function(){var e=(0,r.Z)((function(e,s){var u;return(0,a.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),d.current[s]=new RTCPeerConnection(p),t.current.onicecandidate=function(e){if(e.candidate){if(!n.current)return;console.log("onicecandidate"),k({type:"candidate",label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate},s)}},t.current.oniceconnectionstatechange=function(e){console.log("oniceconnectionstatechange : ",e.target.connectionState)},d.current=(0,c.Z)((0,i.Z)({},d.current),(0,o.Z)({},s,t.current)),[4,d.current[s].setRemoteDescription(new RTCSessionDescription(e))];case 1:return l.sent(),console.log("answer set remote description success",d.current),d.current[s].createAnswer().then(function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,d.current[s].setLocalDescription(e)];case 1:return n.sent(),console.log("setLocalAndSendMessage sending message",e),k(e,s),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Z),[3,3];case 2:return u=l.sent(),console.error(u),[3,3];case 3:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),E=(0,l.useState)([]),L=E[0],A=E[1];(0,l.useEffect)((function(){A(L.concat({header:"ServiceList",filter:{}}));var o=new Array({header:"ServiceList",filter:{}});return n.current=f()(x,{transports:["websocket"]}),n.current.connected?console.log("connected"):(console.log(x),console.log("not conn")),n.current.emit("q_service",o),t.current=new RTCPeerConnection(p),b.current={socketId:n.current.id,room:"room:"+n.current.id,type:"Device_1",description:"Streamer",contents:"jooonik"},n.current.on("all_users",(function(e){console.log("alluser",e.length,e)})),n.current.on("user-connected",(function(e){console.log('"user-connected"',e)})),n.current.on("getOffer",(function(e){console.log("get offer"),R(e)})),n.current.on("getAnswer",(function(n){console.log("get answer"),t.current&&(t.current.setRemoteDescription(new RTCSessionDescription(n)),t.current.onaddstream=e)})),n.current.on("getCandidate",function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return t.current?[4,t.current.addIceCandidate(new RTCIceCandidate(e))]:[2];case 1:return n.sent(),console.log("candidate add success"),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),n.current.on("joined",(function(e,n){T(),console.log("joined!")})),n.current.on("join",(function(e){console.log("Another peer made a request to join room "+e),console.log("This peer is the initiator of room "+e+"!")})),n.current.on("q_result",(function(e){var n=JSON.parse(e);if("ServiceList"===n.header){N.current=n.data;var t=C,r=!0,o=!1,i=void 0;try{for(var c,a=Object.entries(Object(N.current))[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var u=(0,s.Z)(c.value,2),l=u[0],d=u[1];t=t.concat("".concat(l,":").concat(d.sid))}}catch(f){o=!0,i=f}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}_(t)}})),n.current.on("msg-v1",function(){var n=(0,r.Z)((function(n){var r;return(0,a.__generator)(this,(function(o){console.log("------------------msg-v1 ",n.message.type,"-------------------"),r=n.message,console.log("msg from",n.from),console.log("Client received message:",r),v.current=n.from;try{if("connection request"===r)console.log("check : connection request");else if("offer"===r.type)console.log("check : offer",r),R(r,n.from);else if("answer"===r.type){if(!t.current)return[2];console.log("signalingStat",t.current.signalingState),"stable"!==t.current.signalingState&&(console.log("set the pcRef : ",t.current),t.current.setRemoteDescription(new RTCSessionDescription(r)),t.current.onaddstream=e),console.log("set the pcRef2 : ",t.current)}else"candidate"===r.type&&console.log("check : candi---1")}catch(i){console.log("eeeeeeeeeeee",i)}return[2]}))}));return function(e){return n.apply(this,arguments)}}()),function(){n.current,t.current}}),[]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h.Z,{}),(0,u.jsx)(g.Z,{pageTitle:"Security & Surveillance",homePageUrl:"/",homePageText:"Home",activePageText:"Service Details",bgImgClass:"item-bg2"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("video",{style:{width:240,height:240,margin:5,backgroundColor:"black"},muted:!0,ref:j,autoPlay:!0}),(0,u.jsx)("button",{onClick:O,children:"Start Streaming"}),(0,u.jsx)("button",{onClick:function(){T(v.current),console.log(t.current.iceGatheringState)},children:"console debug"}),(0,u.jsx)("select",{onChange:function(e){console.log(e.target.value),w.current=e.target.value},value:w.current,children:C.map((function(e){return(0,u.jsx)("option",{value:e.split(":")[1],children:e},e)}))})]}),(0,u.jsx)(m.Z,{})]})};n.default=j},96894:function(e,n,t){"use strict";t.d(n,{Ki:function(){return o},d5:function(){return r}});var r="https://api.portal301.com/",o="https://soup.portal301.com/"},13823:function(e,n,t){"use strict";var r=t(26042),o=t(69396),i=t(99534),c=t(85893),s=t(11163),a=t(41664),u=t.n(a),l=t(67294);n.Z=(0,s.withRouter)((function(e){var n=e.router,t=e.children,s=(0,i.Z)(e,["router","children"]),a=l.Children.only(t),d=a.props.className||"";return n.pathname===s.href&&s.activeClassName&&(d="".concat(d," ").concat(s.activeClassName).trim()),delete s.activeClassName,(0,c.jsx)(u(),(0,o.Z)((0,r.Z)({},s),{children:l.cloneElement(a,{className:d})}))}))},11163:function(e,n,t){e.exports=t(90387)},70461:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(67294),o=t(38087);function i(e,n){void 0===n&&(n={});var t=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,n){return"undefined"===typeof n&&(n=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!n}(t,n.doNotParse))try{return JSON.parse(t)}catch(r){}return e}var c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},c.apply(this,arguments)},s=function(){function e(e,n){var t=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,n){return"string"===typeof e?o.Q(e,n):"object"===typeof e&&null!==e?e:{}}(e,n),new Promise((function(){t.HAS_DOCUMENT_COOKIE="object"===typeof document&&"string"===typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=o.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var n=0;n<this.changeListeners.length;++n)this.changeListeners[n](e)},e.prototype.get=function(e,n,t){return void 0===n&&(n={}),this._updateBrowserValues(t),i(this.cookies[e],n)},e.prototype.getAll=function(e,n){void 0===e&&(e={}),this._updateBrowserValues(n);var t={};for(var r in this.cookies)t[r]=i(this.cookies[r],e);return t},e.prototype.set=function(e,n,t){var r;"object"===typeof n&&(n=JSON.stringify(n)),this.cookies=c(c({},this.cookies),((r={})[e]=n,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=o.q(e,n,t)),this._emitChange({name:e,value:n,options:t})},e.prototype.remove=function(e,n){var t=n=c(c({},n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=c({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=o.q(e,"",t)),this._emitChange({name:e,value:void 0,options:n})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var n=this.changeListeners.indexOf(e);n>=0&&this.changeListeners.splice(n,1)},e}(),a=r.createContext(new s),u=(a.Provider,a.Consumer,a);function l(e){var n=(0,r.useContext)(u);if(!n)throw new Error("Missing <CookiesProvider>");var t=n.getAll(),o=(0,r.useState)(t),i=o[0],c=o[1],s=(0,r.useRef)(i);return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement&&(0,r.useLayoutEffect)((function(){function t(){var t=n.getAll();(function(e,n,t){if(!e)return!0;for(var r=0,o=e;r<o.length;r++){var i=o[r];if(n[i]!==t[i])return!0}return!1})(e||null,t,s.current)&&c(t),s.current=t}return n.addChangeListener(t),function(){n.removeChangeListener(t)}}),[n]),[i,(0,r.useMemo)((function(){return n.set.bind(n)}),[n]),(0,r.useMemo)((function(){return n.remove.bind(n)}),[n])]}},38087:function(e,n){"use strict";n.Q=function(e,n){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},o=n||{},c=e.split(";"),s=o.decode||t,a=0;a<c.length;a++){var u=c[a],l=u.indexOf("=");if(!(l<0)){var d=u.substring(0,l).trim();if(void 0==r[d]){var f=u.substring(l+1,u.length).trim();'"'===f[0]&&(f=f.slice(1,-1)),r[d]=i(f,s)}}}return r},n.q=function(e,n,t){var i=t||{},c=i.encode||r;if("function"!==typeof c)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var s=c(n);if(s&&!o.test(s))throw new TypeError("argument val is invalid");var a=e+"="+s;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(u)}if(i.domain){if(!o.test(i.domain))throw new TypeError("option domain is invalid");a+="; Domain="+i.domain}if(i.path){if(!o.test(i.path))throw new TypeError("option path is invalid");a+="; Path="+i.path}if(i.expires){if("function"!==typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+i.expires.toUTCString()}i.httpOnly&&(a+="; HttpOnly");i.secure&&(a+="; Secure");if(i.sameSite){switch("string"===typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a};var t=decodeURIComponent,r=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e,n){try{return n(e)}catch(t){return e}}},77020:function(){},47568:function(e,n,t){"use strict";function r(e,n,t,r,o,i,c){try{var s=e[i](c),a=s.value}catch(u){return void t(u)}s.done?n(a):Promise.resolve(a).then(r,o)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(o,i){var c=e.apply(n,t);function s(e){r(c,o,i,s,a,"next",e)}function a(e){r(c,o,i,s,a,"throw",e)}s(void 0)}))}}t.d(n,{Z:function(){return o}})},99534:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[1664,5234,9774,2888,179],(function(){return n=32027,e(e.s=n);var n}));var n=e.O();_N_E=n}]);